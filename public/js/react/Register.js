!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){var EmailStep=require("./register/EmailStep.jsx"),PasswordStep=require("./register/PasswordStep.jsx"),SmsStep=require("./register/SmsStep.jsx"),FinalStep=require("./register/FinalStep.jsx"),ProgressBar=require("./forms/ProgressBar.jsx"),Register=React.createClass({displayName:"Register",getInitialState:function(){return{step:1,email:"",password:"",phone:"",data:{}}},nextStep:function(){this.setState({step:this.state.step+1})},prevStep:function(){this.setState({step:this.state.step-1})},save:function(data){this.setState(data),this.setState({data:{email:this.state.email,password:this.state.password,phone:this.state.phone}})},render:function(){var comp;switch(this.state.step){case 1:comp=React.createElement(EmailStep,{nextStep:this.nextStep,save:this.save});break;case 2:comp=React.createElement(PasswordStep,{nextStep:this.nextStep,prevStep:this.prevStep,save:this.save});break;case 3:comp=React.createElement(SmsStep,{nextStep:this.nextStep,prevStep:this.prevStep,save:this.save});break;case 4:comp=React.createElement(FinalStep,{prevStep:this.prevStep,data:this.state.data})}return React.createElement("div",null,comp,React.createElement("hr",null),React.createElement(ProgressBar,{completed:this.state.step/4*100}))}});React.render(React.createElement(Register,null),$("#content"))},{"./forms/ProgressBar.jsx":3,"./register/EmailStep.jsx":5,"./register/FinalStep.jsx":6,"./register/PasswordStep.jsx":7,"./register/SmsStep.jsx":8}],2:[function(require,module,exports){module.exports=React.createClass({displayName:"exports",getDefaultProps:function(){return{type:"primary"}},render:function(){return React.createElement("button",{className:"btn-"+this.props.type,onClick:this.props.onClick},this.props.children)}})},{}],3:[function(require,module,exports){module.exports=React.createClass({displayName:"exports",render:function(){return React.createElement("div",{className:"progress-bar"},React.createElement("div",{className:"progress-bar-completed",style:{width:this.props.completed+"%"}}))}})},{}],4:[function(require,module,exports){module.exports=React.createClass({displayName:"exports",getDefaultProps:function(){return{type:"info"}},render:function(){return React.createElement("div",{className:"alert alert-"+this.props.type},React.createElement("h3",null,this.props.title),React.createElement("p",null,this.props.children))}})},{}],5:[function(require,module,exports){var Button=require("../forms/Button.jsx");module.exports=React.createClass({displayName:"exports",getInitialState:function(){return{error:!1,message:""}},nextStep:function(){var email=React.findDOMNode(this.refs.email).value,regex=/[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;return regex.test(email)?void ajax({url:"api/register/email/"+email,dataType:"text",success:function(result){1==result?this.setState({error:!0,message:"Email is already linked to an account."}):(this.setState({error:!1,message:""}),this.props.save({email:email}),this.props.nextStep())}.bind(this)}):void this.setState({error:!0,message:"Please enter a valid email."})},next:function(e){13==e.keyCode&&this.nextStep()},render:function(){var inputClass="";return this.state.error&&(inputClass="input-error"),React.createElement("div",{className:"form-step"},React.createElement("div",{className:"form-step-header"},React.createElement("h2",null,"Email"),React.createElement("p",null,"Your email will be used to login to your account, receive notifications, and for account recovery."),React.createElement("hr",null)),React.createElement("div",{className:"form-step-body"},React.createElement("p",{className:"input-error"},this.state.message),React.createElement("input",{type:"email",placeholder:"Enter your email",ref:"email",className:inputClass,onKeyDown:this.next})),React.createElement(Button,{onClick:this.nextStep},"Next"))}})},{"../forms/Button.jsx":2}],6:[function(require,module,exports){var Button=require("../forms/Button.jsx"),Alert=require("../misc/Alert.jsx");module.exports=React.createClass({displayName:"exports",getInitialState:function(){return{error:!1,message:""}},componentWillMount:function(){ajax({url:"api/register/",method:"POST",data:this.props.data,dataType:"json",success:function(result){result.error&&this.setState(result)}.bind(this)})},renderError:function(){return React.createElement("div",{className:"form-step"},React.createElement(Alert,{type:"error",title:"Error"},this.state.message),React.createElement(Button,{onClick:this.props.prevStep},"Back"))},renderSuccess:function(){return React.createElement("div",{className:"form-step"},React.createElement(Alert,{type:"success",title:"Account Created"},"You are now registered and may login."),React.createElement("a",{className:"link-lg",href:"login"},"Login"))},render:function(){return this.state.error?this.renderError():this.renderSuccess()}})},{"../forms/Button.jsx":2,"../misc/Alert.jsx":4}],7:[function(require,module,exports){var Button=require("../forms/Button.jsx");module.exports=React.createClass({displayName:"exports",getInitialState:function(){return{error:!1,message:""}},nextStep:function(){var password=React.findDOMNode(this.refs.password).value,repeat=React.findDOMNode(this.refs.passwordr).value;password!=repeat?this.setState({error:!0,message:"Passwords do not match."}):password.length<12?this.setState({error:!0,message:"Password needs to be at least 12 characters long."}):(this.setState({error:!1,message:""}),this.props.save({password:password}),this.props.nextStep())},next:function(e){13==e.keyCode&&this.nextStep()},render:function(){return React.createElement("div",{className:"form-step"},React.createElement("div",{className:"form-step-header"},React.createElement("h2",null,"Password"),React.createElement("p",null,"A password should contain letters, numbers, special characters and be over 12 characters long."),React.createElement("hr",null)),React.createElement("div",{className:"form-step-body"},React.createElement("p",{className:"input-error"},this.state.message),React.createElement("input",{type:"password",ref:"password",className:this.state.error?"input-error":"",placeholder:"Password"}),React.createElement("input",{type:"password",ref:"passwordr",className:this.state.error?"input-error":"",placeholder:"Confirm",onKeyDown:this.next})),React.createElement(Button,{onClick:this.props.prevStep},"Back"),React.createElement(Button,{onClick:this.nextStep},"Next"))}})},{"../forms/Button.jsx":2}],8:[function(require,module,exports){var Button=require("../forms/Button.jsx");module.exports=React.createClass({displayName:"exports",getInitialState:function(){return{message:""}},sendSMS:function(){var phone=React.findDOMNode(this.refs.phone).value;ajax({url:"api/sms/number/"+phone,dataType:"text",success:function(result){this.setState({message:result})}.bind(this)})},nextStep:function(){var phone=React.findDOMNode(this.refs.phone).value,vcode=React.findDOMNode(this.refs.code).value;phone&&vcode?ajax({url:"api/sms/number/"+phone+"/"+vcode,success:function(result){this.props.save({phone:phone}),this.props.nextStep()}.bind(this)}):this.props.nextStep()},next:function(e){13==e.keyCode&&this.nextStep()},render:function(){return React.createElement("div",{className:"form-step"},React.createElement("div",{className:"form-step-header"},React.createElement("h2",null,"SMS Verification"),React.createElement("p",null,"A security code will be sent to your phone upon login and account recovery for you to enter.",React.createElement("br",null),React.createElement("b",null,"Note:")," You will not be able to sign in without the code.",React.createElement("br",null),React.createElement("small",null,"(optional, click 'Next' to skip)")),React.createElement("hr",null)),React.createElement("div",{className:"form-step-body"},React.createElement("p",null,this.state.message),React.createElement("input",{type:"text",ref:"phone",placeholder:"Phone"}),React.createElement(Button,{onClick:this.sendSMS},"Send Code"),React.createElement("input",{type:"text",ref:"code",placeholder:"Code",onKeyDown:this.next})),React.createElement(Button,{onClick:this.props.prevStep},"Back"),React.createElement(Button,{onClick:this.nextStep},"Next"))}})},{"../forms/Button.jsx":2}]},{},[1]);