!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){var Create=require("./service/Create"),Manage=require("./service/Manage"),List=require("./service/List"),Service=React.createClass({displayName:"Service",getInitialState:function(){return{view:"list"}},componentWillMount:function(){this.routeUpdated()},updateRoute:function(route){route=XACC+"service/dashboard/"+route,history.pushState({},"",route),this.routeUpdated()},routeUpdated:function(){var a=document.createElement("a");switch(a.href=location.href,a.pathname){case"/service/dashboard":this.setState({view:"list"});break;case"/service/dashboard/list":this.setState({view:"list"});break;case"/service/dashboard/create":this.setState({view:"create"});break;default:a.pathname.match(/^\/service\/dashboard\/\d+\/?(\w+)?$/)&&this.setState({view:"manage"})}},render:function(){var view;switch(this.state.view){case"list":view=React.createElement(List,{updateRoute:this.updateRoute});break;case"manage":view=React.createElement(Manage,{updateRoute:this.updateRoute});break;case"create":view=React.createElement(Create,null)}return React.createElement("div",null,React.createElement("div",{className:"nav"},React.createElement("a",{onClick:this.updateRoute.bind(this,"create"),className:"link-lg"},"Create Service"),React.createElement("a",{onClick:this.updateRoute.bind(this,"list"),className:"link-lg"},"View Services")),view)}});ReactDOM.render(React.createElement(Service,null),$("#content"))},{"./service/Create":4,"./service/List":8,"./service/Manage":9}],2:[function(require,module,exports){module.exports=React.createClass({displayName:"exports",getDefaultProps:function(){return{type:"primary"}},render:function(){return React.createElement("button",{className:"btn-"+this.props.type,onClick:this.props.onClick},this.props.children)}})},{}],3:[function(require,module,exports){module.exports=React.createClass({displayName:"exports",getDefaultProps:function(){return{type:"info"}},render:function(){return React.createElement("div",{className:"alert alert-"+this.props.type},React.createElement("h3",null,this.props.title),React.createElement("p",null,this.props.children))}})},{}],4:[function(require,module,exports){var Alert=require("../misc/Alert"),Form=require("./CreateOrEditForm");module.exports=React.createClass({displayName:"exports",getInitialState:function(){return{error:!1,message:""}},createService:function(data){ajax({url:XACC+"api/service/dashboard",data:data,method:"POST",dataType:"json",success:function(res){this.setState(res)}.bind(this)})},render:function(){var alert;return this.state.error?alert=React.createElement(Alert,{type:"error",title:"Error!"},this.state.message):""!=this.state.message&&(alert=React.createElement(Alert,{type:"success",title:"Success!"},this.state.message)),React.createElement("div",null,alert,React.createElement(Form,{buttonText:"Create Service",submit:this.createService}))}})},{"../misc/Alert":3,"./CreateOrEditForm":5}],5:[function(require,module,exports){var Button=require("../forms/Button"),Alert=require("../misc/Alert");module.exports=React.createClass({displayName:"exports",getInitialState:function(){return{error:!1,message:"",lf:{},loading:!0}},componentDidMount:function(){this.props.loadDataFrom?ajax({url:XACC+"api/service/dashboard/"+this.props.loadDataFrom,dataType:"json",success:function(res){this.setState({lf:res,loading:!1})}.bind(this)}):this.setState({loading:!1})},fields:[{name:"F. Name",ref:"fname",usedFor:"",optional:!1,required:!1},{name:"L. Name",ref:"lname",usedFor:"",optional:!1,required:!1},{name:"Address",ref:"address",usedFor:"",optional:!1,required:!1},{name:"ZIP Code",ref:"zip",usedFor:"",optional:!1,required:!1},{name:"Country",ref:"country",usedFor:"",optional:!1,required:!1},{name:"Region",ref:"region",usedFor:"",optional:!1,required:!1},{name:"Email",ref:"email",usedFor:"",optional:!1,required:!1},{name:"Phone #",ref:"phone",usedFor:"",optional:!1,required:!1},{name:"Gender",ref:"gender",usedFor:"",optional:!1,required:!1},{name:"Birthdate",ref:"birthdate",usedFor:"",optional:!1,required:!1}],validate:function(){var info={};if(this.refs.name.value.match(/^[\w\d\s-]{3,25}$/))if(this.refs.link.value.match(/^[\w\d-&?:\/.=]{1,100}$/))if(this.refs.description.value.match(/^[\w\d\s-,:\/.&?!@#$%*()]{3,150}$/)){var error=!1;if(this.fields.forEach(function(field){(this.refs["opt-"+field.ref].checked||this.refs["req-"+field.ref].checked)&&(this.refs["uf-"+field.ref].value.match(/^[\w\d\s-\/]{3,25}$/)?this.refs["opt-"+field.ref].checked&&this.refs["req-"+field.ref].checked?(this.setState({error:!0,message:"Requested user field '"+field.name+"' cannot be both required and optional"}),error=!0):info[field.ref]={required:this.refs["req-"+field.ref].checked,optional:this.refs["opt-"+field.ref].checked,value:this.refs["uf-"+field.ref].value}:(this.setState({error:!0,message:"Invalid 'Used For' description for: "+field.name}),error=!0))}.bind(this)),!error){var data={name:this.refs.name.value,link:this.refs.link.value,info:JSON.stringify(info),description:this.refs.description.value};this.props.submit(data)}}else this.setState({error:!0,message:"Invalid service description"});else this.setState({error:!0,message:"Invalid service link"});else this.setState({error:!0,message:"Invalid service name"})},render:function(){if(this.state.error)var alert=React.createElement(Alert,{type:"error",title:"Error!"},this.state.message);else var alert=React.createElement("div",null);var lf=this.state.lf;return"string"==typeof lf.info&&""!=lf.info&&(lf.info=JSON.parse(lf.info),[0,1].forEach(function(i){var type=0==i?"required":"optional";for(var prop in lf.info[type])if(lf.info[type].hasOwnProperty(prop))for(var i=0;i<this.fields.length;i++)if(this.fields[i].ref==prop){this.fields[i][type]=!0,this.fields[i].usedFor=lf.info[type][prop];break}}.bind(this))),this.state.loading?React.createElement("div",null):React.createElement("div",null,alert,React.createElement("h3",null,"Service Info"),React.createElement("p",null,"Information that users will see when registering or logging in to your service via Xyfir Accounts."),React.createElement("label",null,"Name"),React.createElement("input",{type:"text",ref:"name",defaultValue:lf.name||""}),React.createElement("label",null,"Description"),React.createElement("textarea",{ref:"description",defaultValue:lf.description||""}),React.createElement("label",null,"Website"),React.createElement("input",{type:"text",ref:"link",defaultValue:lf.address||""}),React.createElement("hr",null),React.createElement("h3",null,"Requested Information"),React.createElement("p",null,"This is the information your services wants or needs from a user's account.",React.createElement("br",null),"'Used For' should shortly summarize ",React.createElement("em",null,"why")," your service wants/needs that field from the user."),React.createElement("table",{className:"requested-info"},React.createElement("tr",null,React.createElement("th",null,"Field"),React.createElement("th",null,"Used For"),React.createElement("th",null,"Required"),React.createElement("th",null,"Optional")),this.fields.map(function(field){return React.createElement("tr",null,React.createElement("td",null,field.name),React.createElement("td",null,React.createElement("input",{type:"text",ref:"uf-"+field.ref,defaultValue:field.usedFor})),React.createElement("td",null,React.createElement("input",{type:"checkbox",ref:"req-"+field.ref,defaultChecked:field.required})),React.createElement("td",null,React.createElement("input",{type:"checkbox",ref:"opt-"+field.ref,defaultChecked:field.optional})))})),React.createElement(Button,{type:"primary",onClick:this.validate},this.props.buttonText))}})},{"../forms/Button":2,"../misc/Alert":3}],6:[function(require,module,exports){var Button=require("../forms/Button"),Alert=require("../misc/Alert");module.exports=React.createClass({displayName:"exports",getInitialState:function(){return{error:!1,message:"",confirm:!1}},confirm:function(){ajax({url:"../../../api/service/dashboard/"+this.props.id,method:"DELETE",dataType:"json",success:function(res){res.confirm=!0,this.setState(res)}.bind(this)})},render:function(){return this.state.confirm?React.createElement("div",{className:"delete-service"},React.createElement(Alert,{type:this.state.error?"error":"success",title:this.state.error?"Error!":"Success!"},this.state.message)):React.createElement("div",{className:"delete-service"},React.createElement(Alert,{alert:"danger",title:"Warning!"},"Are you sure you want to delete this service? All users will be unlinked from your service. This action cannot be undone."),React.createElement(Button,{onClick:this.confirm},"Delete Service"))}})},{"../forms/Button":2,"../misc/Alert":3}],7:[function(require,module,exports){var Alert=require("../misc/Alert"),Form=require("./CreateOrEditForm");module.exports=React.createClass({displayName:"exports",getInitialState:function(){return{error:!1,message:""}},updateService:function(data){console.log(data),ajax({url:XACC+"api/service/dashboard/"+this.props.id,data:data,method:"PUT",dataType:"json",success:function(res){this.setState(res)}.bind(this)})},render:function(){var alert;return this.state.error?alert=React.createElement(Alert,{type:"error",title:"Error!"},this.state.message):""!=this.state.message&&(alert=React.createElement(Alert,{type:"success",title:"Success!"},this.state.message)),React.createElement("div",null,alert,React.createElement(Form,{buttonText:"Update",submit:this.updateService,loadDataFrom:this.props.id}))}})},{"../misc/Alert":3,"./CreateOrEditForm":5}],8:[function(require,module,exports){var Button=require("../forms/Button");module.exports=React.createClass({displayName:"exports",getInitialState:function(){return{services:[]}},componentWillMount:function(){var url=(window.location.href.indexOf("list")>-1?"../":"")+"../api/service/dashboard";ajax({url:url,dataType:"json",success:function(res){this.setState(res)}.bind(this)})},render:function(){return React.createElement("div",{className:"service-list"},this.state.services.map(function(service){return React.createElement("div",{className:"service-list-view"},React.createElement("h2",null,React.createElement("a",{onClick:this.props.updateRoute.bind(this,service.id)},service.name)),React.createElement(Button,{type:"secondary",onClick:this.props.updateRoute.bind(this,service.id+"/edit")},"Edit"),React.createElement(Button,{type:"danger",onClick:this.props.updateRoute.bind(this,service.id+"/delete")},"Delete"))}.bind(this)))}})},{"../forms/Button":2}],9:[function(require,module,exports){var Delete=require("./Delete"),Edit=require("./Edit"),View=require("./View");module.exports=React.createClass({displayName:"exports",render:function(){var a=document.createElement("a");a.href=location.href;var routes=a.pathname.split("/"),id=routes[3],action="view";void 0!=routes[4]&&(action=routes[4]);var view;switch(action){case"view":view=React.createElement(View,{id:id});break;case"edit":view=React.createElement(Edit,{id:id});break;case"delete":view=React.createElement(Delete,{id:id})}return React.createElement("div",null,React.createElement("div",{className:"nav-sub"},React.createElement("a",{onClick:this.props.updateRoute.bind(this,id+"/view"),className:"link-lg"},"View"),React.createElement("a",{onClick:this.props.updateRoute.bind(this,id+"/edit"),className:"link-lg"},"Edit"),React.createElement("a",{onClick:this.props.updateRoute.bind(this,id+"/delete"),className:"link-lg"},"Delete")),view)}})},{"./Delete":6,"./Edit":7,"./View":10}],10:[function(require,module,exports){module.exports=React.createClass({displayName:"exports",getInitialState:function(){return{id:0,name:"",description:"",info:"",owner:0,address:""}},componentWillMount:function(){var url=(window.location.href.indexOf("/view")?"../":"")+"../../api/service/dashboard/"+this.props.id;ajax({url:url,dataType:"json",success:function(res){""!=res.info&&(res.info=JSON.parse(res.info)),this.setState(res)}.bind(this)})},render:function(){var requestedData=[],s=this.state;return"object"==typeof this.state.info&&[0,1].forEach(function(i){var type=0==i?"required":"optional";for(var p in s.info[type])s.info[type].hasOwnProperty(p)&&requestedData.push(React.createElement("tr",null,React.createElement("td",null,p),React.createElement("td",null,s.info[type][p]),React.createElement("td",null,"required"==type?"Yes":"No")))}),React.createElement("div",null,React.createElement("h2",null,this.state.name),React.createElement("p",null,this.state.description),React.createElement("a",{href:this.state.address},this.state.address),React.createElement("hr",null),React.createElement("table",{className:"requested-data"},React.createElement("tr",null,React.createElement("th",null,"Field"),React.createElement("th",null,"Used For"),React.createElement("th",null,"Required")),requestedData))}})},{}]},{},[1]);